pragma solidity ^0.5.16;

contract Election {
    
    struct Candidate {
        uint id;
        string name;
        uint voteCount;
        string details;
        string eid;  // "eid" might refer to an identifier, e.g., employee ID or election ID
    }
    
    mapping(uint => Candidate) public cand;
    mapping(address => bool) public voters;
    
    uint public cC;  // Number of candidates
    
    event votedEvent(
        uint indexed _cid
    );
    
    constructor() public {}

    // Function to add a candidate to the election
    function addCandidate(string memory _name, string memory _details, string memory _eid) public {
        cC++; // Increment candidate count
        cand[cC] = Candidate(cC, _name, 0, _details, _eid); // Store the candidate
    }

    // Function to allow a user to vote for a candidate
    function vote(uint _cid) public {
        require(!voters[msg.sender], "You have already voted.");
        require(_cid > 0 && _cid <= cC, "Invalid candidate ID.");
        
        voters[msg.sender] = true;  // Mark voter as voted
        cand[_cid].voteCount++;  // Increment vote count for the candidate
        
        emit votedEvent(_cid);  // Emit event for the vote
    }
}
